# This template changes TS-config for usage of T3sports with FAL.
# Be sure to include this TS-template AFTER the main TS-template of T3sports.

includeLibs.tx_t3sports_fal = EXT:rn_base/util/class.tx_rnbase_util_TSFAL.php


########
# Teams
########

lib.t3sports.teamLogo.big {
	key.field = t3logo
	# render first logo from club record
	0.0.default.conf.tx_cfcleague_club {
		key.field = logo
		default {
			userFunc=tx_rnbase_util_TSFAL->printImages
			refField=logo
		}
	}
	# FAL-Bild anzeigen (Select-Box im Team)
	0.default >
	0.default = IMAGE
	0.default.file {
		treatIdAsReference = 1
		import.field = logo
		maxW = {$plugin.tx_cfcleaguefe_report.maxW_logo}
		maxH = {$plugin.tx_cfcleaguefe_report.maxH_logo}
	}
	# Logo in team record
	default >
	default = IMAGE
	default {
		file.maxH = {$plugin.tx_cfcleaguefe_report.maxH_logo}
		file.maxW = {$plugin.tx_cfcleaguefe_report.maxW_logo}
		file.import.cObject = USER
		file.import.cObject {
			# Mit dieser Methode wird nur die erste Referenz ausgewertet 
			userFunc=tx_rnbase_util_TSFAL->fetchFirstReference
			refField=t3logo
			refTable=tx_cfcleague_teams
		}
		file.treatIdAsReference = 1
	}
}



# remove DAM stuff
lib.t3sports.teamLogo.small.0.default.conf >
lib.t3sports.teamLogo.small.0.default.file {
		maxW = {$plugin.tx_cfcleaguefe_competition.maxW_logo_matchtable}
		maxH = {$plugin.tx_cfcleaguefe_competition.maxH_logo_matchtable}
}

